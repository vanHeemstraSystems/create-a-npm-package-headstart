<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Create an NPM Package - Publishing a ReactJS Component</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Create an NPM Package</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../introduction/index.html">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../requirements/index.html">
 <span class="menu-text">Requirements</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../building-our-application/index.html">
 <span class="menu-text">Building Our Application</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../conclusion/index.html">
 <span class="menu-text">Conclusion</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#create-an-npm-token" id="toc-create-an-npm-token" class="nav-link active" data-scroll-target="#create-an-npm-token">Create an NPM Token</a>
  <ul class="collapse">
  <li><a href="#creating-npm-token-secrets" id="toc-creating-npm-token-secrets" class="nav-link" data-scroll-target="#creating-npm-token-secrets">Creating NPM Token secrets</a></li>
  <li><a href="#creating-a-github-token" id="toc-creating-a-github-token" class="nav-link" data-scroll-target="#creating-a-github-token">Creating a GitHub Token</a>
  <ul class="collapse">
  <li><a href="#about-the-github_token-secret" id="toc-about-the-github_token-secret" class="nav-link" data-scroll-target="#about-the-github_token-secret">About the GITHUB_TOKEN secret</a></li>
  <li><a href="#using-the-github_token-in-a-workflow" id="toc-using-the-github_token-in-a-workflow" class="nav-link" data-scroll-target="#using-the-github_token-in-a-workflow">Using the GITHUB_TOKEN in a workflow</a></li>
  </ul></li>
  <li><a href="#creating-github-token-secrets" id="toc-creating-github-token-secrets" class="nav-link" data-scroll-target="#creating-github-token-secrets">Creating GitHub Token secrets</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Publishing a ReactJS Component</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Based on “Fully Automated npm publish using GitHub Actions and Semantic Release” at https://www.youtube.com/watch?v=QZdY4XYbqLI</p>
<p>Add the following to package.json to avoid being billed for publishing to npm:</p>
<pre><code>...
  "publishConfig": {
    "access": "public"
  },
...</code></pre>
<p>package.json</p>
<section id="create-an-npm-token" class="level1">
<h1>Create an NPM Token</h1>
<p>Based on “Creating and viewing Access Tokens” at https://docs.npmjs.com/creating-and-viewing-access-tokens</p>
<p>Creating granular access tokens on the website npmjs.org.</p>
<ol type="1">
<li><p>In the upper right corner of the page (nmpjs.org), click your profile picture (after having logged in successfully), then click <strong>Access Tokens</strong>.</p></li>
<li><p>Click <strong>Generate New Token</strong>, then click <strong>Granular Access Token</strong>.</p></li>
<li><p>Confirm with your NPM password to continue.</p></li>
<li><p>In the <strong>Token Name</strong> field, enter a name for your token (e.g., EASYASPIE). <em>TIP</em>: We can use https://randomwordgenerator.com/phrase.php to create a unique name, then remove spaces, and capitalize all.</p></li>
<li><p>(Optional) In the <strong>Description</strong> field, enter a description for your token (e.g., NPM Token).</p></li>
<li><p>In the <strong>Expiration</strong> field, enter a token expiration period. This must be between 1 and 365 days. Let us set it to the max of 365 days, based on low vulnerability in case of breach.</p></li>
<li><p>(Optional) In the <strong>Allowed IP Ranges</strong> field, enter IP address ranges to restrict your access token to. You must use <a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">CIDR</a> notation to enter IP adress ranges. To add more than one allowed IP range, click <strong>Add IP Range</strong> and enter an IP range in the new text field. For now, we will skip this restriction, based on low vulnerability in case of breach.</p></li>
<li><p>(Optional) In the <strong>Packages and scopes</strong> section, configure your token’s access to packages and scopes.</p></li>
</ol>
<ul>
<li>In the <strong>Permissions</strong> dropdown menu, select <strong>No access, Read-only</strong>, or <strong>Read and write</strong>.</li>
<li>Under <strong>Select Packages</strong>, select either:</li>
<li><ul>
<li><strong>All Packages</strong> to grant the token access to all packages the user account has access to.</li>
</ul></li>
<li><ul>
<li><strong>Only select packages and scope</strong> to choose up to 50 specific packages or scopes to give token access to. Then select specific packages or scopes from the dropdown menu.</li>
</ul></li>
</ul>
<p>For now we will not use this restriction, based on low vulnerability in case of breach. Hence, choose for Permissions: <strong>Read and write</strong>, and for Select packages: <strong>All packages</strong>.</p>
<ol start="9" type="1">
<li>(Optional) In <strong>Organizations</strong> section, configure your token’s access to organizations.</li>
</ol>
<p><strong>Note</strong>: When you give a token access to an organization, the token can only be used for managing organization settings and teams or users associated with the organization. It does not give the token the right to publish packages managed by the organization.</p>
<p>For now we will not use this restriction, based on low vulnerability in case of breach. Hence, choose for Permissions: <strong>Read and write</strong>, and for Select organizations: <strong>tick all organizations</strong>.</p>
<ol start="10" type="1">
<li><p>Review the token summary, then click <strong>Generate Token</strong>.</p></li>
<li><p>Copy the token from the top of page and keep it somewhere safe for now.</p></li>
</ol>
<section id="creating-npm-token-secrets" class="level2">
<h2 class="anchored" data-anchor-id="creating-npm-token-secrets">Creating NPM Token secrets</h2>
<p>Based on “Set up Secrets in GitHub Action workflows” at <a href="https://github.com/Azure/actions-workflow-samples/blob/master/assets/create-secrets-for-GitHub-workflows.md">https://github.com/marketplace/actions/use-npm-token</a></p>
<ol type="1">
<li>On GitHub, navigate to the main page of the repository.</li>
<li>Under your repository name, click on the <strong>Settings</strong> tab.</li>
<li>In the left sidebar, click <strong>Secrets and variables</strong>, then choose <strong>Actions</strong>.</li>
<li>On the right bar, with the <strong>Secrets</strong> tab selected, click on <strong>New repository secret</strong>.</li>
<li>Type the name for your secret in the “Name” input box (e.g.&nbsp;NPM_TOKEN).</li>
<li>Type the value for your secret (e.g.&nbsp;the value you saved before of the NPM TOKEN you generated on npmjs.org).</li>
<li>Click Add secret.</li>
</ol>
<p>Now this secret will be usable in your GitHub Actions workflow, as follows:</p>
<pre><code>...
      env:
        NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
...</code></pre>
</section>
<section id="creating-a-github-token" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-github-token">Creating a GitHub Token</h2>
<p>Based on “Automatic token authentication” at https://docs.github.com/en/actions/security-guides/automatic-token-authentication</p>
<p>GitHub provides a token that you can use to authenticate on behalf of GitHub Actions.</p>
<section id="about-the-github_token-secret" class="level3">
<h3 class="anchored" data-anchor-id="about-the-github_token-secret">About the GITHUB_TOKEN secret</h3>
<p>At the start of each workflow run, GitHub automatically creates a unique GITHUB_TOKEN secret to use in your workflow. You can use the GITHUB_TOKEN to authenticate in a workflow run.</p>
<p>When you enable GitHub Actions, GitHub installs a GitHub App on your repository. The GITHUB_TOKEN secret is a GitHub App installation access token. You can use the installation access token to authenticate on behalf of the GitHub App installed on your repository. The token’s permissions are limited to the repository that contains your workflow. For more information, see “<a href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token">Permissions for the GITHUB_TOKEN</a>.”</p>
<p>Before each job begins, GitHub fetches an installation access token for the job. The GITHUB_TOKEN expires when a job finishes or after a maximum of 24 hours.</p>
<p>The token is also available in the github.token context. For more information, see “<a href="https://docs.github.com/en/actions/learn-github-actions/contexts#github-context">Contexts</a>.”</p>
</section>
<section id="using-the-github_token-in-a-workflow" class="level3">
<h3 class="anchored" data-anchor-id="using-the-github_token-in-a-workflow">Using the GITHUB_TOKEN in a workflow</h3>
<p>You can use the GITHUB_TOKEN by using the standard syntax for referencing secrets: ${{ secrets.GITHUB_TOKEN }}. Examples of using the GITHUB_TOKEN include passing the token as an input to an action, or using it to make an authenticated GitHub API request.</p>
<p><strong>Important</strong>: An action can access the GITHUB_TOKEN through the github.token context even if the workflow does not explicitly pass the GITHUB_TOKEN to the action. As a good security practice, you should always make sure that actions only have the minimum access they require by limiting the permissions granted to the GITHUB_TOKEN. For more information, see “<a href="https://docs.github.com/en/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token">Permissions for the GITHUB_TOKEN</a>.”</p>
<p>When you use the repository’s GITHUB_TOKEN to perform tasks, events triggered by the GITHUB_TOKEN, with the exception of workflow_dispatch and repository_dispatch, will not create a new workflow run. This prevents you from accidentally creating recursive workflow runs. For example, if a workflow run pushes code using the repository’s GITHUB_TOKEN, a new workflow will not run even when the repository contains a workflow configured to run when push events occur.</p>
</section>
</section>
<section id="creating-github-token-secrets" class="level2">
<h2 class="anchored" data-anchor-id="creating-github-token-secrets">Creating GitHub Token secrets</h2>
<p>At the start of each workflow run, GitHub automatically creates a unique GITHUB_TOKEN secret to use in your workflow. You can use the GITHUB_TOKEN to authenticate in a workflow run, as follows:</p>
<pre><code>...
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
...</code></pre>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>